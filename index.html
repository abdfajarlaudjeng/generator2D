<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Generator 2D + Filter + Shio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      background-color: #333;
      color: white;
      padding: 20px;
      width: 250px;
    }

    .sidebar h2 {
      margin-top: 0;
    }

    .main {
      flex: 1;
      padding: 20px;
    }

    input, button {
      padding: 10px;
      margin: 8px 0;
      width: 100%;
      box-sizing: border-box;
      font-size: 16px;
    }

    button {
      background-color: #008cba;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #005f73;
    }

    textarea {
      width: 100%;
      height: 160px;
      margin-top: 10px;
      font-size: 16px;
      box-sizing: border-box;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
      font-size: 14px;
    }

    th {
      background-color: #f4f4f4;
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<div class="sidebar">
  <h2>Menu</h2>
  <ul>
    <li>Generator 2D</li>
    <li>Filter Angka Main</li>
    <li>Filter Ekor</li>
    <li>Output Kombinasi</li>
    <li>Distribusi Shio</li>
  </ul>
</div>

<div class="main">
  <h2>Generator Kombinasi 2D + Filter + Twin + Shio</h2>

  <label>Masukkan 5–9 digit utama (tanpa spasi):</label>
  <input type="text" id="digitInput" placeholder="Contoh: 1234567" maxlength="9">

  <label>Masukkan Angka Main (4–6 digit):</label>
  <input type="text" id="filterInput" placeholder="Contoh: 124578" maxlength="6">

  <label>Masukkan Ekor Main (4–6 digit):</label>
  <input type="text" id="tailInput" placeholder="Contoh: 1347" maxlength="6">

  <button onclick="generate()">Hasilkan Kombinasi 2D</button>

  <p>Total Kombinasi: <span id="totalCount">0</span></p>
  <textarea id="output" readonly></textarea>

  <h3>Distribusi Shio</h3>
  <table>
    <thead>
      <tr><th>Shio</th><th>Angka</th></tr>
    </thead>
    <tbody id="shioTable"></tbody>
  </table>
</div>

<script>
const shioMap = {
  "Tikus":  ["01","13","25","37","49","61","73","85","97"],
  "Kerbau": ["02","14","26","38","50","62","74","86","98"],
  "Macan":  ["03","15","27","39","51","63","75","87","99"],
  "Kelinci":["04","16","28","40","52","64","76","88","00"],
  "Naga":   ["05","17","29","41","53","65","77","89"],
  "Ular":   ["06","18","30","42","54","66","78","90"],
  "Kuda":   ["07","19","31","43","55","67","79","91"],
  "Kambing":["08","20","32","44","56","68","80","92"],
  "Monyet": ["09","21","33","45","57","69","81","93"],
  "Ayam":   ["10","22","34","46","58","70","82","94"],
  "Anjing": ["11","23","35","47","59","71","83","95"],
  "Babi":   ["12","24","36","48","60","72","84","96"]
};

function generate() {
  const digitRaw = document.getElementById("digitInput").value.trim();
  const filterRaw = document.getElementById("filterInput").value.trim();
  const tailRaw = document.getElementById("tailInput").value.trim();

  const digits = digitRaw.split("").filter(d => /^[0-9]$/.test(d));
  const filterDigits = filterRaw.split("").filter(d => /^[0-9]$/.test(d));
  const tailDigits = tailRaw.split("").filter(d => /^[0-9]$/.test(d));

  if (digits.length < 5 || digits.length > 9) {
    alert("Masukkan 5–9 digit utama tanpa spasi.");
    return;
  }

  if (filterDigits.length < 4 || filterDigits.length > 6) {
    alert("Masukkan angka main 4–6 digit.");
    return;
  }

  if (tailDigits.length < 4 || tailDigits.length > 6) {
    alert("Masukkan ekor main 4–6 digit.");
    return;
  }

  let result = [];

  for (let i = 0; i < digits.length; i++) {
    for (let j = 0; j < digits.length; j++) {
      const kombinasi = digits[i] + digits[j];
      const depan = digits[i];
      const belakang = digits[j];

      if ((filterDigits.includes(depan) || filterDigits.includes(belakang)) &&
          tailDigits.includes(belakang)) {
        result.push(kombinasi);
      }
    }
  }

  // Tambahkan twin dari angka yang termasuk angkaMain dan juga ekor
  const twins = filterDigits.filter(d => tailDigits.includes(d)).map(d => d + d);
  result.push(...twins);

  const unique = [...new Set(result)];
  document.getElementById("output").value = unique.join("*");
  document.getElementById("totalCount").textContent = unique.length;

  // Distribusi Shio
  const shioTable = document.getElementById("shioTable");
  shioTable.innerHTML = "";
  for (const [shio, angkaList] of Object.entries(shioMap)) {
    const match = unique.filter(k => angkaList.includes(k));
    if (match.length > 0) {
      const row = `<tr><td>${shio}</td><td>${match.join(", ")}</td></tr>`;
      shioTable.innerHTML += row;
    }
  }
}
</script>

</body>
</html>
